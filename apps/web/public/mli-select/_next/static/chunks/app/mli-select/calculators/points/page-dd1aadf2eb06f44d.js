(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{43389:function(e,t,n){Promise.resolve().then(n.bind(n,82412))},82412:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(37821),i=n(58078),r=n(91954),l=n(32687);function a(e){let{points:t}=e,n=0;return t>=100?n=100:t>=70?n=70:t>=50&&(n=50),(0,s.jsx)("span",{className:"badge badge-tier",children:n?"Tier ".concat(n):"Not Eligible"})}var c=n(15758),o=n(72187);function u(){let[e,t]=(0,i.useState)("Scenario A"),[n,u]=(0,i.useState)("new"),[d,x]=(0,i.useState)(100),[h,m]=(0,i.useState)(25),[f,j]=(0,i.useState)(10),[b,p]=(0,i.useState)(25),[v,g]=(0,i.useState)(!0),[N,y]=(0,i.useState)(!0),[S,C]=(0,i.useState)(15),[k,w]=(0,i.useState)(0),[E,A]=(0,i.useState)(0),O=(0,c.Si)("new"===n,d?h/d*100:0,f),_=(0,c.qR)(b),F=(0,c.J_)({visitableAll:v,commonsBarrierFree:N,pctAccessible:S,pctUniversal:k,rhfScore:E}),L=(0,c.FY)(O,_,F),P=(0,c.kJ)(L),U=(0,c.FB)(P),I=(0,c.bK)("new"===n,P),M={name:e,projectType:n,units:d,affUnits:h,affYears:f,energyPct:b,visitAll:v,commons:N,accPct:S,udPct:k,rhf:E,points:{affordability:O,energy:_,accessibility:F,total:L,tier:P,amort:U,leverage:I}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{title:"Points & Tier",subtitle:"Estimate your MLI Select score across all three outcomes."}),(0,s.jsx)("section",{className:"section-pad",children:(0,s.jsxs)("div",{className:"container-tight grid gap-6 lg:grid-cols-3",children:[(0,s.jsx)(l.Z,{title:"Inputs",children:(0,s.jsxs)("div",{className:"grid gap-3",children:[(0,s.jsx)("label",{children:"Scenario Name"}),(0,s.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"My scenario"}),(0,s.jsx)("label",{children:"Project Type"}),(0,s.jsxs)("select",{value:n,onChange:e=>u(e.target.value),children:[(0,s.jsx)("option",{value:"new",children:"New Construction"}),(0,s.jsx)("option",{value:"existing",children:"Existing Property"})]}),(0,s.jsx)("label",{children:"Total Units"}),(0,s.jsx)("input",{type:"number",value:d,onChange:e=>x(+e.target.value)}),(0,s.jsx)("label",{children:"Affordable Units"}),(0,s.jsx)("input",{type:"number",value:h,onChange:e=>m(+e.target.value)}),(0,s.jsx)("label",{children:"Affordability Commitment (years)"}),(0,s.jsx)("input",{type:"number",value:f,onChange:e=>j(+e.target.value)}),(0,s.jsx)("label",{children:"Energy Improvement (%)"}),(0,s.jsx)("input",{type:"number",value:b,onChange:e=>p(+e.target.value)}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:v,onChange:e=>g(e.target.checked)}),"All units visitable"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:N,onChange:e=>y(e.target.checked)}),"Barrier-free commons"]})]}),(0,s.jsx)("label",{children:"Fully Accessible Units (% of total)"}),(0,s.jsx)("input",{type:"number",value:S,onChange:e=>C(+e.target.value)}),(0,s.jsx)("label",{children:"Universal Design Units (% of total)"}),(0,s.jsx)("input",{type:"number",value:k,onChange:e=>w(+e.target.value)}),(0,s.jsx)("label",{children:"RHF Accessibility Score"}),(0,s.jsx)("input",{type:"number",value:E,onChange:e=>A(+e.target.value)}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 pt-2",children:[(0,s.jsx)("button",{className:"btn btn-outline",onClick:function(){let e="mli:scenarios",t=JSON.parse(localStorage.getItem(e)||"[]");t.unshift({...M,savedAt:new Date().toISOString()}),localStorage.setItem(e,JSON.stringify(t.slice(0,24))),alert("Saved.")},children:"Save"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:function(){window.print()},children:"Print / PDF"}),(0,s.jsx)("button",{className:"btn btn-outline",onClick:function(){let t=[{name:e,projectType:n,units:d,affUnits:h,affYears:f,energyPct:b,visitAll:v,commons:N,accPct:S,udPct:k,rhf:E,aPts:O,ePts:_,accPts:F,total:L,tier:P,amort:U,leverage:I}];(0,o.EZ)("".concat(e.replace(/\s+/g,"_"),"_points.csv"),t)},children:"Export CSV"}),(0,s.jsx)("button",{className:"btn btn-outline",onClick:function(){(0,o.bb)("".concat(e.replace(/\s+/g,"_"),"_points.json"),M)},children:"Export JSON"})]})]})}),(0,s.jsxs)("div",{className:"lg:col-span-2 grid gap-6",children:[(0,s.jsx)(l.Z,{title:"Results",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Affordability"}),(0,s.jsxs)("div",{className:"mt-1 text-slate-600",children:[(h/d*100||0).toFixed(1),"% units • ",f," years"]}),(0,s.jsxs)("div",{className:"mt-1",children:["Points: ",(0,s.jsx)("b",{children:O})]})]})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Energy"}),(0,s.jsxs)("div",{className:"mt-1 text-slate-600",children:[b,"% improvement"]}),(0,s.jsxs)("div",{className:"mt-1",children:["Points: ",(0,s.jsx)("b",{children:_})]})]})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Accessibility"}),(0,s.jsx)("div",{className:"mt-1 text-slate-600",children:"Points"}),(0,s.jsxs)("div",{className:"mt-1",children:["Points: ",(0,s.jsx)("b",{children:F})]})]})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Total"}),(0,s.jsx)("div",{className:"mt-1 text-2xl font-bold",children:L}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(a,{points:L})}),(0,s.jsxs)("div",{className:"mt-3 text-sm text-slate-600",children:["Max amortization (by tier): ",(0,s.jsxs)("b",{children:[U," years"]})," • Leverage: ",(0,s.jsxs)("b",{children:[(100*I).toFixed(0),"%"]})]})]})})]})}),(0,s.jsx)(l.Z,{title:"Quick Loan Illustration",children:(0,s.jsxs)("div",{className:"text-sm text-slate-700",children:["Example: If project cost/value = ",(0,s.jsx)("b",{children:"$20,000,000"}),", leverage ",Math.round(100*I),"% → max loan ≈"," ",(0,s.jsxs)("b",{children:["$",(0,c.cO)("new"===n,P,2e7).toLocaleString()]}),". At 4.5% / ",U,"y, monthly ≈"," ",(0,s.jsxs)("b",{children:["$",Math.round((0,c.vC)(4.5,U,(0,c.cO)("new"===n,P,2e7))).toLocaleString()]}),"."]})})]})]})})]})}},32687:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(37821);function i(e){let{title:t,children:n}=e;return(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[t&&(0,s.jsx)("h3",{className:"text-lg font-semibold",children:t}),n]})})}},91954:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(37821),i=n(14233);function r(e){let{title:t,subtitle:n,ctas:r=[]}=e;return(0,s.jsx)("section",{className:"bg-gradient-to-b from-white to-slate-50",children:(0,s.jsx)("div",{className:"container-tight section-pad",children:(0,s.jsxs)("div",{className:"max-w-3xl",children:[(0,s.jsx)("span",{className:"badge badge-tier",children:"CMHC • MLI Select"}),(0,s.jsx)("h1",{className:"mt-3 text-3xl sm:text-5xl font-bold tracking-tight text-brand-blue",children:t}),n&&(0,s.jsx)("p",{className:"mt-3 text-slate-700",children:n}),(0,s.jsx)("div",{className:"mt-6 flex flex-wrap gap-3",children:r.map(e=>(0,s.jsx)(i.default,{href:e.href,className:"btn ".concat(e.primary?"btn-primary":"btn-outline"),children:e.label},e.href))})]})})})}},15758:function(e,t,n){"use strict";function s(e,t,n){let s=e/12/100,i=12*t;return 0===s?n/i:n*s/(1-Math.pow(1+s,-i))}function i(e,t,n){let i=e/12/100,r=12*t,l=s(e,t,n),a=n,c=[];for(let e=1;e<=r;e++){let t=i*a,n=l-t;a=Math.max(0,a-n),c.push({period:e,interest:t,principal:n,balance:a})}return{payment:l,rows:c}}function r(e){return e>=100?100:e>=70?70:e>=50?50:0}function l(e,t,n){let s=0;e?t>=25?s=100:t>=15?s=70:t>=10&&(s=50):t>=80?s=100:t>=60?s=70:t>=40&&(s=50);let i=n>=20&&s>0?30:0;return s+i}function a(e){return e>=40?50:e>=25?35:e>=15?20:0}function c(e){let{visitableAll:t,commonsBarrierFree:n,pctAccessible:s,pctUniversal:i,rhfScore:r}=e;return t&&n?s>=15&&i>=85||100===i||100===s||r>=80?30:s>=15||i>=15||r>=60&&r<80?20:0:0}function o(e,t,n){return e+t+n}function u(e){return e>=100?50:e>=70?45:e>=50?40:25}function d(e,t){return e?.95:t>=70?.95:t>=50?.85:0}function x(e){return e>=100?.3:e>=70?.2:e>=50?.1:0}function h(e,t,n){return n*d(e,t)}function m(e){let{noi:t,rateAnnual:n,years:i,minDcr:r}=e;return t/r/12/s(n,i,1)}function f(e){let{monthlyDebtService:t,otherMonthlyOpex:n,units:s,targetMargin:i=0}=e;return s<=0?0:(t+n)*(1+i)/s}function j(e){return .3*e/12}n.d(t,{Df:function(){return i},FB:function(){return u},FY:function(){return o},J_:function(){return c},Qq:function(){return x},Si:function(){return l},bK:function(){return d},cO:function(){return h},kA:function(){return m},kJ:function(){return r},qR:function(){return a},sz:function(){return j},uz:function(){return f},vC:function(){return s}})},72187:function(e,t,n){"use strict";function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",s=new Blob([t],{type:n}),i=URL.createObjectURL(s),r=document.createElement("a");r.href=i,r.download=e,r.click(),URL.revokeObjectURL(i)}function i(e,t,n){s(e,function(e,t){if(!e||0===e.length)return"";let n=t||Object.keys(e[0]),s=e=>{let t=String(null!=e?e:"");return/[",\n]/.test(t)?'"'.concat(t.replace(/"/g,'""'),'"'):t};return n.map(s).join(",")+"\n"+e.map(e=>n.map(t=>s(e[t])).join(",")).join("\n")}(t,n),"text/csv")}function r(e,t){s(e,JSON.stringify(t,null,2),"application/json")}n.d(t,{EZ:function(){return i},bb:function(){return r}})},14233:function(e,t,n){"use strict";n.d(t,{default:function(){return i.a}});var s=n(67498),i=n.n(s)}},function(e){e.O(0,[498,115,205,744],function(){return e(e.s=43389)}),_N_E=e.O()}]);